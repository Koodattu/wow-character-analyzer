# ──────────────────────────────────────────────────────────
# Environment Variables — WoW Character Analyzer
# Copy to .env and fill in production values
# ──────────────────────────────────────────────────────────

# ── Database ──────────────────────────────────────────────
POSTGRES_USER=wow_analyzer
POSTGRES_PASSWORD=change_me_in_production
POSTGRES_DB=wow_analyzer

# Used by backend to connect to PostgreSQL
# Docker: db:5432 (service name) | Local dev: localhost:5432
DATABASE_URL=postgresql://wow_analyzer:change_me_in_production@db:5432/wow_analyzer

# ── Backend ───────────────────────────────────────────────
BACKEND_PORT=3001
CORS_ORIGIN=http://localhost:3000

# URL the backend redirects to after OAuth callbacks
FRONTEND_URL=http://localhost:3000

# Set to "production" for secure cookies and HTTPS
NODE_ENV=development

# ── Frontend ──────────────────────────────────────────────
FRONTEND_PORT=3000

# Server-side API URL (runtime) — used by Server Components inside Docker
# Points to backend via Docker internal DNS
INTERNAL_API_URL=http://backend:3001

# Client-side API URL (build-time) — baked into browser JS bundle
# Must be the publicly reachable backend URL
NEXT_PUBLIC_API_URL=http://localhost:3001

# ── Discord OAuth2 ───────────────────────────────────────
# Create app at https://discord.com/developers/applications
#
# Redirect URI setup (must match EXACTLY in both .env and the Discord portal):
#   Discord Developer Portal → your app → OAuth2 → Redirects → Add Redirect
#
#   Local dev:  http://localhost:3001/api/auth/discord/callback
#   Production: https://yourdomain.com/api/auth/discord/callback
#
# Also enable the "identify" and "email" OAuth2 scopes.
DISCORD_CLIENT_ID=
DISCORD_CLIENT_SECRET=
DISCORD_REDIRECT_URI=http://localhost:3001/api/auth/discord/callback

# ── Battle.net OAuth2 ────────────────────────────────────
# Create client at https://develop.battle.net/access/clients
#
# Redirect URI setup (must match EXACTLY in both .env and the Blizzard portal):
#   Blizzard Developer Portal → your client → Settings → Redirect URIs
#
#   Local dev:  http://localhost:3001/api/auth/battlenet/callback
#   Production: https://yourdomain.com/api/auth/battlenet/callback
#
# Required scope: wow.profile (selected during client creation).
# You can register BOTH redirect URIs at the same time in the portal
# and switch between them via this env var.
BATTLENET_CLIENT_ID=
BATTLENET_CLIENT_SECRET=
BATTLENET_REDIRECT_URI=http://localhost:3001/api/auth/battlenet/callback

# ── Raider.IO API ────────────────────────────────────────
# Optional — works without a key but rate-limited to 200 req/min.
# Register an application at https://raider.io/settings/apps
# to get higher rate limits.
RAIDERIO_API_KEY=

# ── WarcraftLogs API v2 ──────────────────────────────────
# Create client at https://www.warcraftlogs.com/api/clients/
WCL_CLIENT_ID=
WCL_CLIENT_SECRET=

# ── Blizzard API ─────────────────────────────────────────
# Uses the same Battle.net developer portal client
# (can reuse BATTLENET values or create a separate client)
BLIZZARD_CLIENT_ID=
BLIZZARD_CLIENT_SECRET=

# ── AI (OpenAI) ──────────────────────────────────────────
# Optional — AI summaries are skipped if key is empty
OPENAI_API_KEY=
OPENAI_MODEL=gpt-4o-mini

# ── Admin ────────────────────────────────────────────────
# Comma-separated Discord user IDs that get admin access
ADMIN_DISCORD_IDS=

# ── Production: Nginx + SSL (used by docker-compose.prod.yml) ─
# Your domain name (must have DNS pointing to the server)
DOMAIN=example.com

# Let's Encrypt registration email (required for cert issuance)
CERTBOT_EMAIL=you@example.com

# Set to 1 to use Let's Encrypt staging (for testing, avoids rate limits)
CERTBOT_STAGING=0

# When using production compose, you may want to merge files:
# COMPOSE_FILE=docker-compose.yml:docker-compose.prod.yml
